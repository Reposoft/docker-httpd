#!/usr/bin/perl -w

use strict;

use HttpdReconf qw(refresh configtest reload);

refresh() or die('Refresh failed');

configtest() or die('Configtest failed');

reload() or die('Configtest failed');

=pod

# timestamp
RUNLABEL=()

# keep current config state for undo
for (d in conf cert)
  git checkout -b previous-$RUNLABEL

function rollback

# test config
apachectl configtest || rollback

apachectl graceful || rollback

=cut
